<!DOCTYPE html>
<html>
<head>

	
	<link rel="stylesheet" type="text/css" href="../../../leaflet/dist/leaflet.css" />
	<link rel="stylesheet" type="text/css" href="../../Leaflet.draw-0.2.4/dist/leaflet.draw.css" />
	<link rel="stylesheet" href="../../../bootstrap/dist/css/bootstrap.min.css"/>
	<link rel="stylesheet" href="../../../bootstrap/dist/css/bootstrap-theme.min.css"/>
	<link rel="stylesheet" href="../dist/leaflet.toolbar.css"/>
	<script src="../../../jquery/dist/jquery.min.js"></script>
	<script src="../../../bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="../../../leaflet/dist/leaflet-src.js"></script>
	<script src="../dist/leaflet.toolbar-src.js"></script>
	<script src="../../Leaflet.draw-0.2.4/dist/leaflet.draw-src.js"></script>
	
	<script src="ColorPicker.js"></script>
	<style>
		html, body, #map { margin: 0; height: 100%; width: 100%; }
	</style>	
</head>
<body>
	<div id="map"></div>
	<style>
		.leaflet-toolbar-icon .fa { color: #000; }
		.leaflet-color-swatch { background-color: #fff; }
	</style>	
	<script>
		var map = L.map('map').setView([41.7896,-87.5996], 2),
			drawnItems = new L.FeatureGroup().addTo(map),
			editActions = [
				L.Edit.Popup.Edit,
				L.Edit.Popup.Delete,
				L.ToolbarAction.extendOptions({
					toolbarIcon: { 
						className: 'leaflet-color-picker', 
						html: '<span class="fa fa-eyedropper"></span>' 
					},
					subToolbar: new L.Toolbar({ actions: [
						L.ColorPicker.extendOptions({ color: '#db1d0f' }),
						L.ColorPicker.extendOptions({ color: '#025100' }),
						L.ColorPicker.extendOptions({ color: '#ffff00' }),
						L.ColorPicker.extendOptions({ color: '#0000ff' })
					]})
				})
			];

		L.tileLayer("http://t0.tianditu.cn/DataServer?T=img_c&X={x}&Y={y}&L={z}", {
			attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.'
		}).addTo(map);

		new L.DrawToolbar.Control({ 
			position: 'topleft',
			className: 'leaflet-draw-toolbar',
		}).addTo(map);

		map.on('draw:created', function(evt) {
			var	type = evt.layerType,
				layer = evt.layer;

			drawnItems.addLayer(layer);

			layer.on('click', function(event) {
				new L.EditToolbar.Popup(event.latlng, {
					className: 'leaflet-draw-toolbar',
					actions: editActions
				}).addTo(map, layer);
			});
		});
	</script>
</body>
</html>